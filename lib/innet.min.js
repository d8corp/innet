var innet=function(e,n){"use strict";var t={currentPlugins:{},references:{}};function r(e){if(e._parent){var n=e._parent._children;n.splice(n.indexOf(e),1),e._parent=void 0}}function i(e){e.remove(),e instanceof Comment&&u(e)}function o(e){e instanceof Comment&&(e._children?(e.before.apply(e,e._children),e._children.forEach(o)):e._children=[])}function c(e,n,t){if(void 0===t&&(t=0),e._parent){var r=n._parent=e._parent;r._children.splice(r._children.indexOf(e)-t,0,n)}}function u(e){e._children.forEach(i),e._children=[]}function f(e,n){r(n),e instanceof Comment?(n._parent=e,e._children||(e._children=[]),e._children.push(n),e.before(n)):e.appendChild(n),o(n)}var l,a=function(){function e(){this.key=Symbol("ref")}return Object.defineProperty(e.prototype,"value",{get:function(){return t.references[this.key]},enumerable:!1,configurable:!0}),e}(),d=function(){function e(e){this.defaultValue=e,this.key=Symbol("context")}return e.prototype.provide=function(e,n){var r;return{children:n,context:(r={__proto__:t.currentPlugins},r[this.key]=e,r)}},Object.defineProperty(e.prototype,"value",{get:function(){var e=t.currentPlugins,n=this.key;return n in e?e[n]:this.defaultValue},enumerable:!1,configurable:!0}),e}();function s(e,n){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];var i={};return e&&(i.type=e),n&&(i.props=n),t.length&&(i.children=t.flat(1/0)),i}function p(e){var n;return"function"==typeof(null===(n=null==e?void 0:e.prototype)||void 0===n?void 0:n.render)}function h(e){return"context"in e}function v(e,r,i){var o=e.props,c=e.type,u=e.children,f=document.createElement(c);if(o){var l=function(e){if("ref"===e)t.references[o.ref.key]=f;else{var r=o[e];if(e.startsWith("on"))f[e]=r;else{var i="$"===e[0],c=i||"_"===e[0],u=i||!c;c&&(e=e.slice(1)),"function"==typeof r?new n.Watch((function(n){var t=r(n);c&&(f[e]=t),u&&(void 0===t?f.removeAttribute(e):f.setAttribute(e,t))})):(c&&(f[e]=r),u&&void 0!==r&&f.setAttribute(e,r))}}};for(var a in o)l(a)}if(_(f,r),u)for(var d=0;d<u.length;d++)_(u[d],f,i,v)}function _(e,r,i,o){var c;if(void 0===r&&(r=document.body),void 0===i&&(i=t.currentPlugins),void 0===o&&(o=v),e instanceof Node)f(r,e);else if(Array.isArray(e))for(var a=0;a<e.length;a++)_(e[a],r,i,o);else if("object"==typeof e&&null!==e)if(h(e))_(e.children,r,e.context,o);else{var d=e,s=d.type,y=d.props,m=d.children;if(s){if("string"==typeof s)s in i?i[s](e,r,i,o):o(e,r,i);else if("function"==typeof s){var b=t.currentPlugins;if(p(s)){t.currentPlugins=i;var g=new s(y,m);"destructor"in g&&(null===(c=n.Watch.activeWatcher)||void 0===c||c.onDestroy((function(){return g.destructor()}))),_(g.render(y,m),r,i,o),"mounted"in g&&g.mounted()}else{t.currentPlugins=i;var P=l;l=[],_(s(y,m),r,i,o),l.forEach((function(e){return e()})),l=P}t.currentPlugins=b}}else _(m,r,i,o)}else if("function"==typeof e){var C=document.createComment(e.name);f(r,C),new n.Watch((function(n){n&&u(C);var r=t.currentPlugins;t.currentPlugins=i,_(e(n),C,i,o),t.currentPlugins=r}))}else"string"!=typeof e&&"number"!=typeof e||f(r,document.createTextNode(e+""));return r}return _.create=s,(e=_).Context=d,e.Ref=a,e.after=function(e,n){r(n),c(e,n),e.after(n),o(n)},e.append=f,e.before=function(e,n){r(n),c(e,n,1),e instanceof Comment?(e._children[0]||e).before(n):e.before(n),o(n)},e.clear=u,e.create=s,e.dom=v,e.innet=_,e.isComponent=p,e.isContextNode=h,e.onMounted=function(e){l.push(e)},e.prepend=function(e,n){r(n),e instanceof Comment?(n._parent=e,e._children||(e._children=[]),e._children.unshift(n),(e._children[1]||e).before(n)):e.prepend(n),o(n)},e.remove=function(e){r(e),i(e)},Object.defineProperty(e,"__esModule",{value:!0}),e}({},watchState);
